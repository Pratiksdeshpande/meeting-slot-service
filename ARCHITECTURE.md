# Architecture Overview

Visual representation of the meeting slot service architecture, data flow, and core algorithm.

---

## ðŸ›ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Client Layer                            â”‚
â”‚  (Web Apps, Mobile Apps, CLI Tools, Postman, etc.)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ HTTP/HTTPS
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          AWS Application Load Balancer (ALB)                    â”‚
â”‚  â€¢ Health Checks (/health every 30s)                            â”‚
â”‚  â€¢ Cross-zone Load Balancing                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                   â”‚                   â”‚
         â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EC2 Instance â”‚    â”‚ EC2 Instance â”‚    â”‚ EC2 Instance â”‚
â”‚  (Go App)    â”‚    â”‚  (Go App)    â”‚    â”‚  (Go App)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
         Auto Scaling Group (1-4 instances)
         â€¢ Scale up: CPU > 70%
         â€¢ Scale down: CPU < 20%
                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Meeting Slot Service (Go) - Application Layer              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚                  HTTP Handler Layer                   â”‚     â”‚
â”‚  â”‚  â€¢ User Handlers        â€¢ Event Handlers              â”‚     â”‚
â”‚  â”‚  â€¢ Availability Handlersâ€¢ Health Check                â”‚     â”‚
â”‚  â”‚  â€¢ Middleware (CORS, Logging, Recovery)               â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                          â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚                   Service Layer                       â”‚     â”‚
â”‚  â”‚  â€¢ User Service         â€¢ Event Service               â”‚     â”‚
â”‚  â”‚  â€¢ Availability Service â€¢ Recommendation Service      â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                          â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚                 Repository Layer                      â”‚     â”‚
â”‚  â”‚  â€¢ User Repository      â€¢ Event Repository            â”‚     â”‚
â”‚  â”‚  â€¢ Availability Repository  â€¢ Participant Repository  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚              â”‚              â”‚
            â–¼              â–¼              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  AWS RDS     â”‚ â”‚ AWS Secrets  â”‚ â”‚ CloudWatch   â”‚
    â”‚  MySQL 8.0   â”‚ â”‚  Manager     â”‚ â”‚ â€¢ Logs       â”‚
    â”‚  (Multi-AZ)  â”‚ â”‚ (DB Creds)   â”‚ â”‚ â€¢ Metrics    â”‚
    â”‚              â”‚ â”‚              â”‚ â”‚ â€¢ Dashboard  â”‚
    â”‚              â”‚ â”‚              â”‚ â”‚ â€¢ Alarms     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ”„ Request Flow

### 1. Create Event

```
Client             Handler            Service           Repository        Database
  â”‚                   â”‚                  â”‚                   â”‚                â”‚
  â”‚ POST /events      â”‚                  â”‚                   â”‚                â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚                   â”‚                â”‚
  â”‚                   â”‚ Decode JSON      â”‚                   â”‚                â”‚
  â”‚                   â”‚ CreateEvent()    â”‚                   â”‚                â”‚
  â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚                â”‚
  â”‚                   â”‚                  â”‚ Validate organizerâ”‚                â”‚
  â”‚                   â”‚                  â”‚ exists            â”‚                â”‚
  â”‚                   â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                â”‚
  â”‚                   â”‚                  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚
  â”‚                   â”‚                  â”‚ Validate slots    â”‚                â”‚
  â”‚                   â”‚                  â”‚ Generate event ID â”‚                â”‚
  â”‚                   â”‚                  â”‚ repo.Create()     â”‚                â”‚
  â”‚                   â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                â”‚
  â”‚                   â”‚                  â”‚                   â”‚ INSERT events  â”‚
  â”‚                   â”‚                  â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚                   â”‚                  â”‚                   â”‚ INSERT slots   â”‚
  â”‚                   â”‚                  â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚                   â”‚                  â”‚                   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                   â”‚                  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ (IDs + times)  â”‚
  â”‚                   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚                â”‚
  â”‚ 201 Created       â”‚                  â”‚                   â”‚                â”‚
  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚                   â”‚                â”‚
  â”‚ {event with slots}â”‚                  â”‚                   â”‚                â”‚
```

### 2. Submit Availability

```
Client             Handler            Service           Repository        Database
  â”‚                   â”‚                  â”‚                   â”‚                â”‚
  â”‚ POST /events/{id}/â”‚                  â”‚                   â”‚                â”‚
  â”‚  participants/    â”‚                  â”‚                   â”‚                â”‚
  â”‚  {uid}/availabil. â”‚                  â”‚                   â”‚                â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚                   â”‚                â”‚
  â”‚                   â”‚ Decode JSON      â”‚                   â”‚                â”‚
  â”‚                   â”‚ SubmitAvailabil. â”‚                   â”‚                â”‚
  â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚                â”‚
  â”‚                   â”‚                  â”‚ Verify event      â”‚                â”‚
  â”‚                   â”‚                  â”‚ exists            â”‚                â”‚
  â”‚                   â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                â”‚
  â”‚                   â”‚                  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚
  â”‚                   â”‚                  â”‚ Verify user is    â”‚                â”‚
  â”‚                   â”‚                  â”‚ a participant     â”‚                â”‚
  â”‚                   â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                â”‚
  â”‚                   â”‚                  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚
  â”‚                   â”‚                  â”‚ Validate slots    â”‚                â”‚
  â”‚                   â”‚                  â”‚ (end > start)     â”‚                â”‚
  â”‚                   â”‚                  â”‚ Normalize to UTC  â”‚                â”‚
  â”‚                   â”‚                  â”‚ repo.CreateSlots()â”‚                â”‚
  â”‚                   â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                â”‚
  â”‚                   â”‚                  â”‚                   â”‚ INSERT avail.  â”‚
  â”‚                   â”‚                  â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚                   â”‚                  â”‚                   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                   â”‚                  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚
  â”‚                   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚                â”‚
  â”‚ 200 OK            â”‚                  â”‚                   â”‚                â”‚
  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚                   â”‚                â”‚
  â”‚ {message: success}â”‚                  â”‚                   â”‚                â”‚
```

### 3. Get Recommendations

```
Client             Handler            Service           Repository        Database
  â”‚                   â”‚                  â”‚                   â”‚                â”‚
  â”‚ GET /events/{id}/ â”‚                  â”‚                   â”‚                â”‚
  â”‚  recommendations  â”‚                  â”‚                   â”‚                â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚                   â”‚                â”‚
  â”‚                   â”‚ GetRecommend.()  â”‚                   â”‚                â”‚
  â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚                â”‚
  â”‚                   â”‚                  â”‚ Load event +      â”‚                â”‚
  â”‚                   â”‚                  â”‚ proposed slots    â”‚                â”‚
  â”‚                   â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                â”‚
  â”‚                   â”‚                  â”‚                   â”‚ SELECT events  â”‚
  â”‚                   â”‚                  â”‚                   â”‚ + slots        â”‚
  â”‚                   â”‚                  â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚                   â”‚                  â”‚                   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                   â”‚                  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚
  â”‚                   â”‚                  â”‚ Load all avail.   â”‚                â”‚
  â”‚                   â”‚                  â”‚ slots (all users) â”‚                â”‚
  â”‚                   â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                â”‚
  â”‚                   â”‚                  â”‚                   â”‚ SELECT avail.  â”‚
  â”‚                   â”‚                  â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚                   â”‚                  â”‚                   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                   â”‚                  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚
  â”‚                   â”‚                  â”‚ Run Slot Matching â”‚                â”‚
  â”‚                   â”‚                  â”‚ Algorithm         â”‚                â”‚
  â”‚                   â”‚                  â”‚  â†’ Generate       â”‚                â”‚
  â”‚                   â”‚                  â”‚    candidates     â”‚                â”‚
  â”‚                   â”‚                  â”‚  â†’ Score each     â”‚                â”‚
  â”‚                   â”‚                  â”‚  â†’ Pick best slot â”‚                â”‚
  â”‚                   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚                â”‚
  â”‚ 200 OK            â”‚                  â”‚                   â”‚                â”‚
  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚                   â”‚                â”‚
  â”‚ {best_recommend.} â”‚                  â”‚                   â”‚                â”‚
```

---

## ðŸ§© Component Breakdown

### Project Structure

```
meeting-slot-service/
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ server/
â”‚       â””â”€â”€ main.go                      # Entry point, router setup, dependency injection
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ swagger.yaml                     # OpenAPI 3.0 specification
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ config.go                    # Env var loading, DB config, server config
â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â””â”€â”€ database.go                  # MySQL connection, AWS Secrets Manager integration
â”‚   â”œâ”€â”€ handler/
â”‚   â”‚   â”œâ”€â”€ user_handler.go              # CRUD endpoints for users
â”‚   â”‚   â”œâ”€â”€ event_handler.go             # Event + participant endpoints
â”‚   â”‚   â””â”€â”€ availability_handler.go      # Availability + recommendations endpoints
â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”œâ”€â”€ logger.go                    # Request/response logging
â”‚   â”‚   â”œâ”€â”€ recovery.go                  # Panic recovery
â”‚   â”‚   â””â”€â”€ cors.go                      # CORS headers
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ user.go                      # User struct
â”‚   â”‚   â”œâ”€â”€ event.go                     # Event struct, EventFilter, status constants
â”‚   â”‚   â”œâ”€â”€ slot.go                      # ProposedSlot + AvailabilitySlot structs
â”‚   â”‚   â”œâ”€â”€ participant.go               # EventParticipant struct + status constants
â”‚   â”‚   â””â”€â”€ recommendation.go            # Recommendation + RecommendationResponse structs
â”‚   â”œâ”€â”€ repository/
â”‚   â”‚   â”œâ”€â”€ interface.go                 # Repository interfaces (for testability)
â”‚   â”‚   â”œâ”€â”€ user_repository.go           # User DB operations
â”‚   â”‚   â”œâ”€â”€ event_repository.go          # Event + proposed slot DB operations
â”‚   â”‚   â”œâ”€â”€ availability_repository.go   # Availability slot DB operations
â”‚   â”‚   â””â”€â”€ participant_repository.go    # Event participant DB operations
â”‚   â”œâ”€â”€ service/
â”‚   â”‚   â”œâ”€â”€ user_service.go              # User business logic
â”‚   â”‚   â”œâ”€â”€ event_service.go             # Event business logic, participant management
â”‚   â”‚   â”œâ”€â”€ availability_service.go      # Availability validation + persistence
â”‚   â”‚   â””â”€â”€ recommendation_service.go    # Slot matching algorithm (core)
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ id_generator.go              # Prefixed ID generation (usr_, evt_)
â”‚       â”œâ”€â”€ time_utils.go                # Timezone normalization helpers
â”‚       â””â”€â”€ response.go                  # Standardized JSON response helpers
â”œâ”€â”€ terraform/                           # AWS infrastructure (ALB, ASG, RDS, CloudWatch)
â”œâ”€â”€ env.local.ps1                        # Windows env vars for local dev
â”œâ”€â”€ env.local.sh                         # Linux/Mac env vars for local dev
â”œâ”€â”€ Makefile
â””â”€â”€ go.mod
```

### Layer Responsibilities

| Layer          | Responsibility                                        | Key Files              |
|----------------|-------------------------------------------------------|------------------------|
| **Handler**    | Parse HTTP requests, validate input, write responses  | `internal/handler/`    |
| **Middleware** | Cross-cutting concerns: logging, CORS, panic recovery | `internal/middleware/` |
| **Service**    | Business logic, validation rules, algorithm execution | `internal/service/`    |
| **Repository** | SQL queries, data mapping, database transactions      | `internal/repository/` |
| **Models**     | Data structures shared across all layers              | `internal/models/`     |
| **Utils**      | ID generation, timezone helpers, response formatting  | `internal/utils/`      |

---

## ðŸ“Š Data Model

### Entity Relationship Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      users       â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id        VARCHARâ”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ name      VARCHARâ”‚                                   â”‚
â”‚ email     VARCHARâ”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚ created_at       â”‚             â”‚ organizer_id        â”‚ user_id
â”‚ updated_at       â”‚             â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚                     â”‚
                            â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚    events      â”‚   â”‚ event_participants  â”‚
                            â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
                            â”‚ id      VARCHARâ”‚â”€â”€â–ºâ”‚ id          UINT    â”‚
                            â”‚ title          â”‚   â”‚ event_id    VARCHAR â”‚
                            â”‚ description    â”‚   â”‚ user_id     VARCHAR â”‚
                            â”‚ organizer_id   â”‚   â”‚ status      VARCHAR â”‚
                            â”‚ duration_min   â”‚   â”‚ created_at          â”‚
                            â”‚ status         â”‚   â”‚ updated_at          â”‚
                            â”‚ created_at     â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚ updated_at     â”‚
                            â”‚ deleted_at     â”‚
                            â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚ event_id (FK)
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                         â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   proposed_slots   â”‚   â”‚  availability_slots  â”‚
          â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
          â”‚ id         UINT    â”‚   â”‚ id          UINT     â”‚
          â”‚ event_id   VARCHAR â”‚   â”‚ event_id    VARCHAR  â”‚
          â”‚ start_time DATETIMEâ”‚   â”‚ user_id     VARCHAR  â”‚
          â”‚ end_time   DATETIMEâ”‚   â”‚ start_time  DATETIME â”‚
          â”‚ timezone   VARCHAR â”‚   â”‚ end_time    DATETIME â”‚
          â”‚ created_at         â”‚   â”‚ timezone    VARCHAR  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ created_at           â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Data Flow Example

**Scenario**: Finding a 90-minute meeting slot for a 4-person global team

```
Step 1 â€” Organizer creates event with proposed time windows:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Event: "Q1 Brainstorming" | Duration: 90 min                 â”‚
  â”‚ Proposed Slots (stored as UTC):                              â”‚
  â”‚   Slot 1: Jan 15, 22:00 â†’ Jan 16, 01:00 UTC                  â”‚
  â”‚   Slot 2: Jan 16, 16:00 â†’ Jan 16, 19:00 UTC  â† Target        â”‚
  â”‚   Slot 3: Jan 18, 02:00 â†’ Jan 18, 05:00 UTC                  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 2 â€” Organizer registers all 4 participants at once:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ POST /events/{id}/participants                               â”‚
  â”‚ { "user_ids": ["sarah_id","raj_id","emma_id","carlos_id"] }  â”‚
  â”‚ â†’ 4 rows inserted into event_participants table              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 3 â€” Each participant submits their available windows in local time:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Sarah  (SF   / PST UTC-8):   8:00AMâ€“11:00AM PST             â”‚
  â”‚  Raj    (BLR  / IST UTC+5:30):9:30PMâ€“12:30AM IST             â”‚
  â”‚  Emma   (BER  / CET UTC+1):   4:00PMâ€“7:00PM  CET             â”‚
  â”‚  Carlos (NYC  / EST UTC-5):  10:00AMâ€“3:00PM  EST             â”‚
  â”‚                                                              â”‚
  â”‚  â†’ All stored in availability_slots as UTC after conversion  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 4 â€” Algorithm finds the best slot and returns recommendation:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Best Slot: Jan 16, 16:00â€“17:30 UTC (90 min)                 â”‚
  â”‚  Availability: 4/4 â†’ 100%                                    â”‚
  â”‚  In local times:                                             â”‚
  â”‚    Sarah  â†’ 8:00AM  PST  âœ… Morning hours                    â”‚
  â”‚    Raj    â†’ 9:30PM  IST  âœ… Late evening                     â”‚
  â”‚    Emma   â†’ 5:00PM  CET  âœ… End of work day                  â”‚
  â”‚    Carlos â†’ 11:00AM EST  âœ… Mid-morning                      â”‚
  â”‚                                                              â”‚
  â”‚  Message: "Perfect match! All 4 participants are available"  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸš€ Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         AWS Cloud (VPC)                        â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚               Public Subnets (2 Availability Zones)      â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚  â”‚  Application Load Balancer (ALB)                â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ HTTP Listener: Port 80                       â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Health Check: GET /health every 30s          â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Target Group: EC2 instances on port 8080     â”‚     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â”‚                     â”‚                                    â”‚  â”‚
â”‚  â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚  â”‚
â”‚  â”‚       â–¼             â–¼             â–¼                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚  â”‚
â”‚  â”‚  â”‚  EC2 #1 â”‚  â”‚  EC2 #2 â”‚  â”‚  EC2 #3 â”‚  ...              â”‚  â”‚
â”‚  â”‚  â”‚  Go App â”‚  â”‚  Go App â”‚  â”‚  Go App â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚  :8080  â”‚  â”‚  :8080  â”‚  â”‚  :8080  â”‚                   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  Auto Scaling Group                                      â”‚  â”‚
â”‚  â”‚  â€¢ Min: 1  Desired: 2  Max: 4                            â”‚  â”‚
â”‚  â”‚  â€¢ Scale Up:   CPU > 70% for 2 min â†’ +1 instance         â”‚  â”‚
â”‚  â”‚  â€¢ Scale Down: CPU < 20% for 2 min â†’ -1 instance         â”‚  â”‚
â”‚  â”‚  â€¢ Target: 50% average CPU                               â”‚  â”‚
â”‚  â”‚  â€¢ Zero-downtime deploys via instance refresh            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚               Private Subnets (2 Availability Zones)     â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚  â”‚  AWS RDS MySQL 8.0                              â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Multi-AZ Deployment (automatic failover)     â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Storage auto-scaling: 20 â†’ 100 GB            â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Automated backups (7-day retention)          â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Encryption at rest                           â”‚     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Supporting Services                                     â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  AWS Secrets Manager  â†’ DB credentials (no plaintext)    â”‚  â”‚
â”‚  â”‚  CloudWatch Logs      â†’ /aws/ec2/{env}/application       â”‚  â”‚
â”‚  â”‚                          /aws/ec2/{env}/error            â”‚  â”‚
â”‚  â”‚                          /aws/ec2/{env}/system           â”‚  â”‚
â”‚  â”‚  CloudWatch Metrics   â†’ ALB, EC2, RDS dashboards         â”‚  â”‚
â”‚  â”‚  CloudWatch Alarms    â†’ CPU high/low, error rate alerts  â”‚  â”‚
â”‚  â”‚  S3 Bucket            â†’ ALB access logs                  â”‚  â”‚
â”‚  â”‚  NAT Gateway          â†’ Private subnet internet access   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
