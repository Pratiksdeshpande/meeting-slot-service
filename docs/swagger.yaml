openapi: 3.0.3
info:
  title: Meeting Slot Service API
  version: 1.0.0
  description: |
    REST API for managing meeting slots and finding optimal meeting times for distributed teams.
    
    This service helps teams across multiple time zones find the best available meeting slots
    based on participant availability, working hours, and configurable preferences.

servers:
  - url: https://{api-gateway-id}.execute-api.{region}.amazonaws.com/v1
    description: AWS API Gateway
    variables:
      api-gateway-id:
        default: xxxxx
        description: API Gateway ID
      region:
        default: us-east-1
        description: AWS Region
  - url: http://localhost:8080
    description: Local development server

tags:
  - name: Health
    description: Health check endpoints
  - name: Users
    description: User management operations
  - name: Events
    description: Event/Meeting management operations
  - name: Participants
    description: Event participant management
  - name: Availability
    description: Participant availability management
  - name: Recommendations
    description: Meeting slot recommendation operations

paths:
  /health:

    get:
      tags:
        - Health
      summary: Health check
      description: Returns the health status of the service
      operationId: healthCheck
      responses:
        '200':
          description: Service is healthy
          content:
            text/plain:
              schema:
                type: string
                example: "OK"

  /api/v1/users:

    post:
      tags:
        - Users
      summary: Create a new user
      description: Creates a new user with name and email
      operationId: createUser
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateUserRequest'
      responses:
        '201':
          description: User created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          description: Invalid request body
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/users/{id}:

    get:
      tags:
        - Users
      summary: Get user by ID
      description: Retrieves a specific user by their unique identifier
      operationId: getUserById
      parameters:
        - name: id
          in: path
          required: true
          description: User unique identifier
          schema:
            type: string
            example: "usr_abc123"
      responses:
        '200':
          description: User found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '404':
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    put:
      tags:
        - Users
      summary: Update user
      description: Updates an existing user's information
      operationId: updateUser
      parameters:
        - name: id
          in: path
          required: true
          description: User unique identifier
          schema:
            type: string
            example: "usr_abc123"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserRequest'
      responses:
        '200':
          description: User updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          description: Invalid request body
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    delete:
      tags:
        - Users
      summary: Delete user
      description: Deletes a user by their unique identifier
      operationId: deleteUser
      parameters:
        - name: id
          in: path
          required: true
          description: User unique identifier
          schema:
            type: string
            example: "usr_abc123"
      responses:
        '204':
          description: User deleted successfully
        '404':
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/events:

    post:
      tags:
        - Events
      summary: Create a new event
      description: Creates a new meeting event with proposed time slots
      operationId: createEvent
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateEventRequest'
      responses:
        '201':
          description: Event created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          description: Invalid request body
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    get:
      tags:
        - Events
      summary: List events
      description: Retrieves a paginated list of events with optional filters
      operationId: listEvents
      parameters:
        - name: organizer_id
          in: query
          description: Filter by organizer ID
          schema:
            type: string
        - name: status
          in: query
          description: Filter by event status
          schema:
            type: string
            enum: [pending, confirmed, cancelled]
        - name: page
          in: query
          description: Page number
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: Items per page
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: List of events
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EventListResponse'

  /api/v1/events/{id}:

    get:
      tags:
        - Events
      summary: Get event by ID
      description: Retrieves a specific event by its unique identifier
      operationId: getEventById
      parameters:
        - name: id
          in: path
          required: true
          description: Event unique identifier
          schema:
            type: string
            example: "evt_xyz789"
      responses:
        '200':
          description: Event found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '404':
          description: Event not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    put:
      tags:
        - Events
      summary: Update event
      description: Updates an existing event's information
      operationId: updateEvent
      parameters:
        - name: id
          in: path
          required: true
          description: Event unique identifier
          schema:
            type: string
            example: "evt_xyz789"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateEventRequest'
      responses:
        '200':
          description: Event updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          description: Invalid request body
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Event not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    delete:
      tags:
        - Events
      summary: Delete event
      description: Soft deletes an event by its unique identifier
      operationId: deleteEvent
      parameters:
        - name: id
          in: path
          required: true
          description: Event unique identifier
          schema:
            type: string
            example: "evt_xyz789"
      responses:
        '204':
          description: Event deleted successfully
        '404':
          description: Event not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/events/{id}/participants:

    post:
      tags:
        - Participants
      summary: Add participant to event
      description: Adds a participant to an existing event
      operationId: addParticipant
      parameters:
        - name: id
          in: path
          required: true
          description: Event unique identifier
          schema:
            type: string
            example: "evt_xyz789"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddParticipantRequest'
      responses:
        '201':
          description: Participant added successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          description: Invalid request body
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Event not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    get:
      tags:
        - Participants
      summary: Get event participants
      description: Retrieves all participants for a specific event
      operationId: getEventParticipants
      parameters:
        - name: id
          in: path
          required: true
          description: Event unique identifier
          schema:
            type: string
            example: "evt_xyz789"
      responses:
        '200':
          description: List of participants
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '404':
          description: Event not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/events/{id}/participants/{user_id}:

    delete:
      tags:
        - Participants
      summary: Remove participant from event
      description: Removes a participant from an event
      operationId: removeParticipant
      parameters:
        - name: id
          in: path
          required: true
          description: Event unique identifier
          schema:
            type: string
            example: "evt_xyz789"
        - name: user_id
          in: path
          required: true
          description: User unique identifier
          schema:
            type: string
            example: "usr_abc123"
      responses:
        '204':
          description: Participant removed successfully
        '404':
          description: Event or participant not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/events/{id}/participants/{user_id}/availability:

    post:
      tags:
        - Availability
      summary: Submit availability
      description: Submit availability slots for a participant in an event
      operationId: submitAvailability
      parameters:
        - name: id
          in: path
          required: true
          description: Event unique identifier
          schema:
            type: string
            example: "evt_xyz789"
        - name: user_id
          in: path
          required: true
          description: User unique identifier
          schema:
            type: string
            example: "usr_abc123"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AvailabilityRequest'
      responses:
        '200':
          description: Availability submitted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          description: Invalid request body
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Event or participant not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    put:
      tags:
        - Availability
      summary: Update availability
      description: Update availability slots for a participant in an event
      operationId: updateAvailability
      parameters:
        - name: id
          in: path
          required: true
          description: Event unique identifier
          schema:
            type: string
            example: "evt_xyz789"
        - name: user_id
          in: path
          required: true
          description: User unique identifier
          schema:
            type: string
            example: "usr_abc123"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AvailabilityRequest'
      responses:
        '200':
          description: Availability updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          description: Invalid request body
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Event or participant not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    get:
      tags:
        - Availability
      summary: Get availability
      description: Get availability slots for a participant in an event
      operationId: getAvailability
      parameters:
        - name: id
          in: path
          required: true
          description: Event unique identifier
          schema:
            type: string
            example: "evt_xyz789"
        - name: user_id
          in: path
          required: true
          description: User unique identifier
          schema:
            type: string
            example: "usr_abc123"
      responses:
        '200':
          description: Availability slots retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '404':
          description: Event or participant not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/events/{id}/recommendations:

    get:
      tags:
        - Recommendations
      summary: Get meeting slot recommendations
      description: |
        Generates recommended meeting time slots based on participant availability.
        Returns slots ranked by suitability score considering how many participants are available.
      operationId: getRecommendations
      parameters:
        - name: id
          in: path
          required: true
          description: Event unique identifier
          schema:
            type: string
            example: "evt_xyz789"
      responses:
        '200':
          description: List of recommended meeting slots
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RecommendationResponse'
        '404':
          description: Event not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

components:

  schemas:
    SuccessResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          type: object
          description: Response data (varies by endpoint)

    ErrorResponse:
      type: object
      properties:
        success:
          type: boolean
          example: false
        error:
          type: object
          properties:
            code:
              type: string
              description: Error code
              example: "NOT_FOUND"
            message:
              type: string
              description: Error message
              example: "Resource not found"

    User:
      type: object
      properties:
        id:
          type: string
          description: Unique user identifier
          example: "usr_abc123"
        name:
          type: string
          description: User full name
          example: "John Doe"
        email:
          type: string
          format: email
          description: User email address
          example: "john.doe@example.com"
        created_at:
          type: string
          format: date-time
          description: User creation timestamp
          example: "2026-01-01T00:00:00Z"
        updated_at:
          type: string
          format: date-time
          description: User last update timestamp
          example: "2026-01-01T00:00:00Z"

    CreateUserRequest:
      type: object
      required:
        - name
        - email
      properties:
        name:
          type: string
          description: User full name
          example: "John Doe"
        email:
          type: string
          format: email
          description: User email address
          example: "john.doe@example.com"

    UpdateUserRequest:
      type: object
      properties:
        name:
          type: string
          description: User full name
          example: "John Doe Updated"
        email:
          type: string
          format: email
          description: User email address

    Event:
      type: object
      properties:
        id:
          type: string
          description: Unique event identifier
          example: "evt_xyz789"
        title:
          type: string
          description: Event title
          example: "Weekly Team Standup"
        description:
          type: string
          description: Event description
          example: "Weekly synchronization meeting"
        organizer_id:
          type: string
          description: ID of the event organizer
          example: "usr_abc123"
        duration_minutes:
          type: integer
          description: Event duration in minutes
          example: 30
        status:
          type: string
          enum: [pending, confirmed, cancelled]
          description: Event status
          example: "pending"
        proposed_slots:
          type: array
          items:
            $ref: '#/components/schemas/ProposedSlot'
        participants:
          type: array
          items:
            $ref: '#/components/schemas/Participant'
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    ProposedSlot:
      type: object
      properties:
        id:
          type: integer
          description: Slot ID
        event_id:
          type: string
          description: Associated event ID
        start_time:
          type: string
          format: date-time
          description: Slot start time
          example: "2026-02-20T09:00:00Z"
        end_time:
          type: string
          format: date-time
          description: Slot end time
          example: "2026-02-20T10:00:00Z"
        timezone:
          type: string
          description: Timezone
          example: "UTC"
        created_at:
          type: string
          format: date-time

    CreateEventRequest:
      type: object
      required:
        - title
        - organizer_id
        - duration_minutes
      properties:
        title:
          type: string
          description: Event title
          example: "Weekly Team Standup"
        description:
          type: string
          description: Event description
          example: "Weekly synchronization meeting"
        organizer_id:
          type: string
          description: ID of the event organizer
          example: "usr_abc123"
        duration_minutes:
          type: integer
          minimum: 5
          maximum: 480
          description: Event duration in minutes
          example: 30
        proposed_slots:
          type: array
          items:
            type: object
            required:
              - start_time
              - end_time
              - timezone
            properties:
              start_time:
                type: string
                format: date-time
                example: "2026-02-20T09:00:00Z"
              end_time:
                type: string
                format: date-time
                example: "2026-02-20T10:00:00Z"
              timezone:
                type: string
                example: "UTC"

    UpdateEventRequest:
      type: object
      properties:
        title:
          type: string
          description: Event title
        description:
          type: string
          description: Event description
        duration_minutes:
          type: integer
          minimum: 5
          maximum: 480
          description: Event duration in minutes

    EventListResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          type: array
          items:
            $ref: '#/components/schemas/Event'
        pagination:
          type: object
          properties:
            page:
              type: integer
              example: 1
            limit:
              type: integer
              example: 20
            total:
              type: integer
              example: 100

    Participant:
      type: object
      properties:
        id:
          type: integer
          description: Unique participant record identifier
        event_id:
          type: string
          description: Associated event ID
        user_id:
          type: string
          description: Associated user ID
        status:
          type: string
          enum: [invited, accepted, declined]
          description: Participant's response status
          example: "invited"
        user:
          $ref: '#/components/schemas/User'
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    AddParticipantRequest:
      type: object
      required:
        - user_id
      properties:
        user_id:
          type: string
          description: User ID to add as participant
          example: "usr_abc123"

    AvailabilitySlot:
      type: object
      properties:
        id:
          type: integer
          description: Slot ID
        event_id:
          type: string
          description: Associated event ID
        user_id:
          type: string
          description: Associated user ID
        start_time:
          type: string
          format: date-time
          description: Availability start time
          example: "2026-02-20T09:00:00Z"
        end_time:
          type: string
          format: date-time
          description: Availability end time
          example: "2026-02-20T10:00:00Z"
        timezone:
          type: string
          description: Timezone
          example: "UTC"
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    AvailabilityRequest:
      type: object
      required:
        - available_slots
      properties:
        available_slots:
          type: array
          items:
            type: object
            required:
              - start_time
              - end_time
              - timezone
            properties:
              start_time:
                type: string
                format: date-time
                description: Availability start time
                example: "2026-02-20T09:00:00Z"
              end_time:
                type: string
                format: date-time
                description: Availability end time
                example: "2026-02-20T10:00:00Z"
              timezone:
                type: string
                description: Timezone
                example: "UTC"

    RecommendationResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          type: object
          properties:
            event_id:
              type: string
              description: Event ID
              example: "evt_xyz789"
            duration_minutes:
              type: integer
              description: Event duration
              example: 60
            total_participants:
              type: integer
              description: Total number of participants
              example: 4
            best_recommendation:
              $ref: '#/components/schemas/Recommendation'
            message:
              type: string
              description: Human-readable message about the recommendation
              example: "Perfect match! All 4 participants are available for this time slot"

    Recommendation:
      type: object
      properties:
        slot:
          type: object
          properties:
            start_time:
              type: string
              format: date-time
              description: Recommended slot start time
              example: "2026-02-20T14:00:00Z"
            end_time:
              type: string
              format: date-time
              description: Recommended slot end time
              example: "2026-02-20T15:00:00Z"
            timezone:
              type: string
              description: Timezone
              example: "UTC"
        available_participants:
          type: integer
          description: Number of participants available
          example: 4
        availability_rate:
          type: number
          format: float
          description: Availability rate (0.0 to 1.0)
          example: 1.0
        available_users:
          type: array
          items:
            type: string
          description: List of available user IDs
          example: ["usr_abc123", "usr_def456"]
        unavailable_users:
          type: array
          items:
            type: string
          description: List of unavailable user IDs
          example: []

